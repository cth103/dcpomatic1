def configure(conf):
    if bld.env.TARGET_WINDOWS:
        conf.check_cfg(package = '', atleast_version = '2.9.4', path = 'wx-config', args = '--cppflags --cxxflags --libs', uselib_store = 'WXWIDGETS', mandatory = True)
    else:
        conf.check_cfg(package = '', atleast_version = '2.8.12', path = 'wx-config', args = '--cppflags --cxxflags --libs', uselib_store = 'WXWIDGETS', mandatory = True)

def build(bld):
    if bld.env.STATIC:
        obj = bld(features = 'cxx cxxstlib')
    else:
        obj = bld(features = 'cxx cxxshlib')

    obj.name   = 'libdvdomatic-wx'
    obj.includes = [ '..' ]
    obj.export_includes = ['.']
    obj.uselib = 'WXWIDGETS'
    obj.use = 'libdvdomatic'
    obj.source = """
                 config_dialog.cc
                 dci_name_dialog.cc
                 dir_picker_ctrl.cc
                 film_editor.cc
                 film_viewer.cc
                 filter_dialog.cc
                 filter_view.cc
                 gain_calculator_dialog.cc
                 job_manager_view.cc
                 job_wrapper.cc
                 new_film_dialog.cc
                 properties_dialog.cc
                 server_dialog.cc
                 wx_util.cc
                 wx_ui_signaller.cc
                 """

    obj.target = 'dvdomatic-wx'
